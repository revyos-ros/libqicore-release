From 326fa7ced5faae52cfbca8324b1bcca2fca429b3 Mon Sep 17 00:00:00 2001
From: Pandhariix <mbusy.pro@gmail.com>
Date: Mon, 16 Dec 2019 16:56:33 +0100
Subject: [PATCH 2/3] Update libqicore CMakeLists for melodic compilation

---
 libqicore/CMakeLists.txt | 34 +++++++++++++++-------------------
 1 file changed, 15 insertions(+), 19 deletions(-)

diff --git a/libqicore/CMakeLists.txt b/libqicore/CMakeLists.txt
index 8f29340..0049b08 100644
--- a/libqicore/CMakeLists.txt
+++ b/libqicore/CMakeLists.txt
@@ -1,20 +1,19 @@
 ## Copyright (c) 2012, 2014 Aldebaran Robotics. All rights reserved.
 
-find_package(qimodule)
-include_directories(".")
+include_directories("." ${catkin_INCLUDE_DIRS})
 
 set(PUBLIC_HEADERS
-    qicore/api.hpp
-    qicore/loglistener.hpp
-    qicore/logmanager.hpp
-    qicore/logmessage.hpp
-    qicore/logprovider.hpp
-    qicore/file.hpp
-    qicore/detail/fileoperation.hxx
-    )
-qi_install_header(${PUBLIC_HEADERS} KEEP_RELATIVE_PATHS)
+  qicore/api.hpp
+  qicore/loglistener.hpp
+  qicore/logmanager.hpp
+  qicore/logmessage.hpp
+  qicore/logprovider.hpp
+  qicore/file.hpp
+  qicore/detail/fileoperation.hxx
+)
+install(FILES ${PUBLIC_HEADERS} DESTINATION ${CATKIN_GLOBAL_INCLUDE_DESTINATION}/qicore)
 
-qi_create_module(qicore SRC
+add_library(qicore
   ${PUBLIC_HEADERS}
   src/loglistener_proxy.cpp
   src/logmanager_proxy.cpp
@@ -27,12 +26,9 @@ qi_create_module(qicore SRC
   src/fileoperation.cpp
   src/progressnotifier.cpp
   src/progressnotifier_proxy.cpp
-  DEPENDS BOOST
 )
-qi_use_lib(qicore QI)
-qi_stage_lib(qicore)
 
-if(QI_WITH_TESTS)
-  add_subdirectory("tests")
-  add_subdirectory("example")
-endif()
+target_link_libraries(qicore ${Boost_LIBRARIES} ${catkin_LIBRARIES})
+install(TARGETS qicore DESTINATION ${CATKIN_PACKAGE_LIB_DESTINATION})
+
+#add_subdirectory("tests")
\ No newline at end of file
-- 
2.7.4

